# π“‚ StockPilot ν”„λ΅μ νΈ κµ¬μ΅° λ° μ—­ν•  μ •μ

## 1. ν”„λ΅μ νΈ κ°μ”

**StockPilot**μ€ κ°μΈ ν¬μμλ¥Ό μ„ν• ν¬νΈν΄λ¦¬μ¤ λ¶„μ„ λ° λ¦¬ν¬ν… ν”λ«νΌμ…λ‹λ‹¤. 
Next.js (App Router) κΈ°λ°μ μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μΌλ΅, Firebaseλ¥Ό λ°±μ—”λ“ μ„λΉ„μ¤(Auth, Firestore)λ΅ μ‚¬μ©ν•λ©°, ν•κµ­ν¬μμ¦κ¶(KIS) APIλ¥Ό ν†µν•΄ μ‹¤μ‹κ°„ μ‹μ¥ λ°μ΄ν„°λ¥Ό μ κ³µν•©λ‹λ‹¤.

---

## 2. κΈ°μ  μ¤νƒ (Tech Stack)

- **Framework**: Next.js 14+ (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS, Shadcn/ui (Radix UI κΈ°λ°)
- **State Management**: Zustand
- **Backend/Auth**: Firebase (Authentication, Firestore)
- **External API**: KIS (Korea Investment & Securities) API

---

## 3. ν΄λ” κµ¬μ΅° (Directory Structure)

```
StockPilot/
β”β”€β”€ .github/
β”β”€β”€ public/
β”β”€β”€ scripts/
β”β”€β”€ src/
β”‚   β”β”€β”€ app/
β”‚   β”‚   β”β”€β”€ (routes)/          # λΌμ°νΈ κ·Έλ£Ή (login, portfolio, etc.)
β”‚   β”‚   β”β”€β”€ api/               # API Route Handlers
β”‚   β”‚   β”β”€β”€ layout.tsx         # Root Layout
β”‚   β”‚   β””β”€β”€ page.tsx           # Home Page
β”‚   β”β”€β”€ components/
β”‚   β”‚   β”β”€β”€ analysis/          # λ¶„μ„ κ΄€λ ¨ μ»΄ν¬λ„νΈ
β”‚   β”‚   β”β”€β”€ cards/             # μΉ΄λ“ UI μ»΄ν¬λ„νΈ
β”‚   β”‚   β”β”€β”€ charts/            # μ°¨νΈ μ»΄ν¬λ„νΈ
β”‚   β”‚   β”β”€β”€ holdings/          # λ³΄μ μΆ…λ© κ΄€λ ¨ μ»΄ν¬λ„νΈ
β”‚   β”‚   β”β”€β”€ layout/            # λ μ΄μ•„μ›ƒ μ»΄ν¬λ„νΈ (Footer, Header, etc.)
β”‚   β”‚   β”β”€β”€ portfolio/         # ν¬νΈν΄λ¦¬μ¤ κ΄€λ ¨ μ»΄ν¬λ„νΈ
β”‚   β”‚   β”β”€β”€ ui/                # κ³µν†µ UI μ»΄ν¬λ„νΈ (Shadcn UI)
β”‚   β”‚   β””β”€β”€ alerts/            # μ•λ¦Ό κ΄€λ ¨
β”‚   β”β”€β”€ lib/
β”‚   β”‚   β”β”€β”€ firebase/          # Firebase μ„¤μ •
β”‚   β”‚   β””β”€β”€ utils.ts           # μ ν‹Έλ¦¬ν‹° ν•¨μ
β”‚   β”β”€β”€ services/
β”‚   β”‚   β”β”€β”€ market-data/       # μ‹μ„Έ λ°μ΄ν„° μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ portfolio/         # ν¬νΈν΄λ¦¬μ¤ μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ report/            # λ¦¬ν¬νΈ μ„λΉ„μ¤
β”‚   β”‚   β””β”€β”€ api-queue.ts       # API μ”μ²­ ν κ΄€λ¦¬
β”‚   β”β”€β”€ stores/                # Zustand μƒνƒ κ΄€λ¦¬
β”‚   β””β”€β”€ types/                 # TypeScript νƒ€μ… μ •μ
β”β”€β”€ .env.local
β”β”€β”€ firebase.json
β”β”€β”€ next.config.ts
β”β”€β”€ package.json
β””β”€β”€ tsconfig.json
```

### π“¦ Root (`/`)

ν”„λ΅μ νΈμ μ„¤μ • νμΌ λ° μ •μ  λ¦¬μ†μ¤κ°€ μ„μΉν•©λ‹λ‹¤.

- `public/`: μ΄λ―Έμ§€, ν°νΈ λ“± μ •μ  μ—μ…‹ μ €μ¥μ†
- `scripts/`: κ°λ° λ° λ°°ν¬ λ³΄μ΅° μ¤ν¬λ¦½νΈ
- `.github/`: GitHub Actions μ›ν¬ν”λ΅μ° μ„¤μ •
- `firebase.json` / `firestore.rules`: Firebase νΈμ¤ν… λ° λ³΄μ• κ·μΉ™ μ„¤μ •
- `next.config.ts`: Next.js μ„¤μ •

### π“‚ Source (`/src`)

μ• ν”λ¦¬μΌ€μ΄μ…μ ν•µμ‹¬ μ†μ¤ μ½”λ“κ°€ μ„μΉν•©λ‹λ‹¤.

#### 1οΈβƒ£ `src/app` (App Router)

νμ΄μ§€ λΌμ°ν… λ° λ μ΄μ•„μ›ƒμ„ λ‹΄λ‹Ήν•©λ‹λ‹¤.

- **`layout.tsx`**: μ „μ—­ λ μ΄μ•„μ›ƒ (Theme, AuthProvider ν¬ν•¨)
- **`page.tsx`**: λ©”μΈ ν™ νμ΄μ§€ (λ€μ‹λ³΄λ“ λ“±)
- **`api/`**: Next.js Route Handlers (λ°±μ—”λ“ λ΅μ§, KIS API ν”„λ΅μ‹ λ“±)
  - `kis/`: ν•κµ­ν¬μμ¦κ¶ API ν†µμ‹ μ„ μ„ν• μ„λ²„ μ‚¬μ΄λ“ ν”„λ΅μ‹
- **`(routes)`**:
  - `login/`, `signup/`: μΈμ¦ κ΄€λ ¨ νμ΄μ§€
  - `portfolio/`: ν¬νΈν΄λ¦¬μ¤ λ¶„μ„ λ° μƒμ„Έ νμ΄μ§€
  - `reports/`: ν¬μ λ³΄κ³ μ„ νμ΄μ§€
  - `settings/`: μ‚¬μ©μ μ„¤μ • νμ΄μ§€
  - `welcome/`: νμ›κ°€μ… ν›„ μ¨λ³΄λ”© νμ΄μ§€

#### 2οΈβƒ£ `src/components` (UI Components)

μ¬μ‚¬μ© κ°€λ¥ν• UI μ»΄ν¬λ„νΈλ“¤μ…λ‹λ‹¤.

- **`ui/`**: λ²„νΌ, μ…λ ¥μ°½, λ‹¤μ΄μ–Όλ΅κ·Έ λ“± κΈ°λ³Έ UI μ”μ† (Shadcn/ui)
- **`layout/`**: ν—¤λ”, μ‚¬μ΄λ“λ°”, ν‘Έν„° λ“± λ μ΄μ•„μ›ƒ μ»΄ν¬λ„νΈ
- **`cards/`**: λ€μ‹λ³΄λ“ λ° λ¦¬ν¬νΈμ—μ„ μ‚¬μ©λλ” λ°μ΄ν„° μΉ΄λ“
- **`charts/`**: μ°¨νΈ μ‹κ°ν™” μ»΄ν¬λ„νΈ (Recharts λ“± μ‚¬μ©)
- **`analysis/`**: μμµλ¥  λ¶„μ„, μ„ν—λ„ λ¶„μ„ λ“± λ¶„μ„ μ „μ© μ»΄ν¬λ„νΈ
- **`portfolio/`**: ν¬νΈν΄λ¦¬μ¤ λ©λ΅, μ•„μ΄ν… λ“± ν¬νΈν΄λ¦¬μ¤ κ΄€λ ¨ μ»΄ν¬λ„νΈ
- **`holdings/`**: λ³΄μ  μΆ…λ© λ¦¬μ¤νΈ λ° μƒμ„Έ μ •λ³΄ μ»΄ν¬λ„νΈ

#### 3οΈβƒ£ `src/services` (Business Logic)

API ν†µμ‹  λ° ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§μ„ μ²λ¦¬ν•©λ‹λ‹¤.

- **`market-data/`**: μ£Όμ‹ μ‹μ„Έ, μ‹μ¥ μ§€μ μ΅°ν λ΅μ§
- **`portfolio/`**: ν¬νΈν΄λ¦¬μ¤ CRUD λ° κ³„μ‚° λ΅μ§
- **`report/`**: λ¶„μ„ λ¦¬ν¬νΈ μƒμ„± λ΅μ§
- **`api-queue.ts`**: **ν•µμ‹¬ κΈ°λ¥**. API Rate Limit(μ΄λ‹Ή μ ν•)μ„ κ΄€λ¦¬ν•λ©° μ”μ²­μ„ ν(Queue)μ— λ‹΄μ•„ λ°°μΉ μ²λ¦¬ν•λ” μ‹±κΈ€ν†¤ μ„λΉ„μ¤

#### 4οΈβƒ£ `src/stores` (State Management)

Zustandλ¥Ό μ΄μ©ν• ν΄λΌμ΄μ–ΈνΈ μƒνƒ κ΄€λ¦¬μ…λ‹λ‹¤.

- **`auth-store.ts`**: μ‚¬μ©μ λ΅κ·ΈμΈ μƒνƒ κ΄€λ¦¬
- **`portfolio-store.ts`**: μ„ νƒλ ν¬νΈν΄λ¦¬μ¤ λ° λ°μ΄ν„° μƒνƒ κ΄€λ¦¬

#### 5οΈβƒ£ `src/lib` (Utilities)

κ³µν†µ μ ν‹Έλ¦¬ν‹° λ° μ„¤μ • νμΌμ…λ‹λ‹¤.

- **`firebase/`**: Firebase μ΄κΈ°ν™” λ° ν΄λΌμ΄μ–ΈνΈ/μ–΄λ“λ―Ό SDK μ„¤μ •
- **`utils.ts`**: ν΄λμ¤ μ΄λ¦„ λ³‘ν•©(clsx, tw-merge) λ“± ν—¬νΌ ν•¨μ

#### 6οΈβƒ£ `src/types` (Type Definitions)

TypeScript νƒ€μ… μ •μ νμΌλ“¤μ…λ‹λ‹¤.

- **`user.ts`**: μ‚¬μ©μ ν”„λ΅ν•„ λ¨λΈ
- **`portfolio.ts`**: ν¬νΈν΄λ¦¬μ¤ κµ¬μ΅° λ° μμ‚° λ°μ΄ν„° λ¨λΈ
- **`analysis.ts`**: λ¶„μ„ κ²°κ³Ό λ° λ¦¬ν¬νΈ λ°μ΄ν„° λ¨λΈ

---

## 4. μ£Όμ” κΈ°λ¥ λ¨λ“ (Key Modules)

### π” μΈμ¦ λ° μ‚¬μ©μ κ΄€λ¦¬ (Auth & User)

- **Firebase Auth**λ¥Ό ν†µν• μ΄λ©”μΌ/μ†μ… λ΅κ·ΈμΈ
- `src/app/welcome`μ„ ν†µν• **μ¨λ³΄λ”© ν”„λ΅μ„Έμ¤** (μ΄κΈ° λ‹‰λ„¤μ„ μ„¤μ • λ“±)
- `AuthProvider`λ¥Ό ν†µν•΄ μ•± μ „μ—­μ—μ„ λ΅κ·ΈμΈ μƒνƒ λ™κΈ°ν™”

### π“ μ‹μ¥ λ°μ΄ν„° μ²λ¦¬ (Market Data & API Queue)

- **KIS API** μ—°λ™μ„ ν†µν•΄ μ‹¤μ‹κ°„/μ§€μ—° μ‹μ„Έ μ΅°ν
- **ApiQueue (`api-queue.ts`)**:
  - μ—¬λ¬ μ»΄ν¬λ„νΈμ—μ„ λ™μ‹λ‹¤λ°μ μΌλ΅ λ°μƒν•λ” μ‹μ„Έ μ”μ²­μ„ μμ§‘
  - KIS APIμ Rate Limit(μ: μ΄λ‹Ή 20κ±΄)μ„ λ„μ§€ μ•λ„λ΅ 1.1μ΄ κ°„κ²©μΌλ΅ λ°°μΉ μ²λ¦¬
  - μ¤‘λ³µ μ”μ²­ λ°©μ§€ λ° μΊμ‹±(Caching) κΈ°λ¥ ν¬ν•¨

### π’Ό ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬ (Portfolio)

- Firestoreλ¥Ό λ΅μ»¬ DBμ²λΌ ν™μ©ν•μ—¬ ν¬νΈν΄λ¦¬μ¤ λ°μ΄ν„° μ‹¤μ‹κ°„ λ™κΈ°ν™”
- λ³΄μ  μΆ…λ©μ ν„μ¬κ°€ ν‰κ°€ λ° μμµλ¥  μλ™ κ³„μ‚°
